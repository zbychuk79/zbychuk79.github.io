<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>System ratunkowy Debian - Zbychuk&#39;s HomePage</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta property="og:title" content="System ratunkowy Debian" />
<meta property="og:description" content="Jak wygenerować obraz systemu ratunkowego do nagrania na Pendrive." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/system-ratunkowy/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-01T05:41:03+02:00" />
<meta property="article:modified_time" content="2021-12-01T05:41:03+02:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="System ratunkowy Debian"/>
<meta name="twitter:description" content="Jak wygenerować obraz systemu ratunkowego do nagrania na Pendrive."/>

	<link href="https://fonts.googleapis.com/css2?family=Fira+Sans&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
	<link rel="stylesheet" type="text/css" media="screen" href="css/main.css" /><link rel="stylesheet" type="text/css" href="css/dark.css" media="(prefers-color-scheme: dark)" />
</head>
<body>
	<div class="content">
		<div class="content">
<header>
<div class="main">
	<a href="">Zbychuk&#39;s HomePage</a>
</div>
<nav>
			

</nav>
</header>
<main>
<article>
		<div class="title">
			<h1 class="title">System ratunkowy Debian</h1>
			<div class="meta"> </div>
		</div>
		<div>
			
		</div>

		<section class="body">
			<hr>
<p>Przedstawię tu opis generowania obrazu systemu ratunkowego, który będzie można zapisać na Pendrive i używać jako systemu ratunkowego LiveUSB.</p>
<p>Czynności będę wykonywał w systemie <strong>Debian</strong> (pod <strong>VirtualBox</strong>-em), ponieważ nie udało mi się poprawnie uruchomić programu debootstick pod <strong>Docker</strong>-em.</p>
<p>Napisałem prosty skrypt o nazwie <a href="https://raw.githubusercontent.com/zbychuk79/debian-rescue/master/scripts/rescue">rescue</a>.</p>
<p>Wymaga on do działania zainstalowanych paczek:</p>
<ul>
<li>git</li>
<li>debootstrap</li>
<li>debootstick</li>
</ul>
<p>Oto opcje mojego skryptu:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">Jak używać: rescue [ -d ] [ -s ] [ -r ] [ -i ] [ -c ]
 -d tworzy na dysku środowisko chroot z Debianem w /home/chroot_debian
 -s tworzy skrypty do wykonania w chroot z Debianem
 -r wejdź do chroot z Debianem
 -i generuje uruchamialny obraz systemu przez debootstick
 -c kasuje z dysku środowisko chroot z Debianem
</code></pre></div><p>Należy go uruchomić (jako zwykły użytkownik) kilka razy z kolejnymi opcjami.</p>
<p>Po uruchomieniu skryptu z opcją &ldquo;-r&rdquo; trzeba załadować skrypt <em>setup.sh</em> z głównego katalogu:</p>
<p># /setup.sh</p>
<p>Pozwoli on ustawić hasło administratora, ściągnie odpowiedni skrypt i krótki plik z opisem systemu.</p>
<p>Potem wychodzimy z <strong>chroot</strong> poleceniem:</p>
<p># exit</p>
<p>Po uruchomieniu skryptu z opcją &ldquo;-i&rdquo; zostanie wygenerowany obraz w katalogu <em>/home/chroot_debian</em>.</p>
<p>Należy teraz zapisać go na Pendrive używając do tego programu <strong>Etcher</strong>.</p>
<p>Po uruchomieniu z niego komputera, partycja systemowa na Pendrive zostanie powiększona na jego pełną objętość. Po zalogowaniu się jako &ldquo;root&rdquo; z hasłem &ldquo;root&rdquo; można używać systemu.</p>
<p>Po pierwszym załadowania systemu, trzeba uruchomić skrypt, który jest w katalogu <em>/root</em>, aby zainstalować dodatkowe programy.</p>
<p># <em>/root/install.sh</em></p>
<p>Trzeba teraz ustawić strefę czasową, a w systemie zostaną zainstalowane między innymi:</p>
<ul>
<li>mc</li>
<li>rsync</li>
<li>restic</li>
<li>fsarchiver</li>
<li>dar</li>
</ul>
<p>Krótki opis systemu na Pendrive jest w pliku <em>/czytaj.txt</em>.</p>
<hr>
<p><strong>Uwaga:</strong> Wykryłem błąd w moim skrypcie generującym skrypt uruchamiany po pierwszym starcie systemu z Pendrive. Poprawiałem go, ale trzeba to jeszcze przetestować.</p>
<hr>
<p>Brakuje jeszcze paczek firmware do urządzeń, które są w sekcjach &ldquo;contrib&rdquo; i &ldquo;non-free&rdquo; dystrybucji <strong>Debian</strong> (sekcje te muszę dodać do konfiguracji APT). Dodatkowo muszę jeszcze ustawić automatyczne połączenie do sieci komputerowej.</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

		</section>

		<div class="post-tags">
			
				
			
		</div>
		
	
	<footer>
<hr>⚡️
	2022  <a href="https://github.com/athul/archie">Temat Archie</a> | Wybudowane przez <a href="https://gohugo.io">Hugo</a>
</footer>




<script>
      feather.replace()
</script>

	</div>
</body>
</html>
